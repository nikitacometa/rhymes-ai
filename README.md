# RhymePadre üé§

Telegram-–±–æ—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö —Ä–∏—Ñ–º (–º—É–ª—å—Ç–∏—Å–∏–ª–ª–∞–±–∏—á–µ—Å–∫–∏–µ, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ, —Å–ª–∞–Ω—Ç-—Ä–∏—Ñ–º—ã).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç **–ü–æ–∏—Å–∫ —Ä–∏—Ñ–º –ø–æ –∑–≤—É—á–∞–Ω–∏—é** ‚Äî –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ –±—É–∫–≤–∞–º!
- üì• **–ò–º–ø–æ—Ä—Ç —Ç–µ–∫—Å—Ç–æ–≤** ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç–µ .txt/.md —Ñ–∞–π–ª, –±–æ—Ç –∏–∑–≤–ª–µ—á—ë—Ç —Ä–∏—Ñ–º—ã
- üéØ **–§–æ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** ‚Äî —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è —Ä—É—Å—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ —Ñ–æ–Ω–µ–º—ã
- ü§ñ **LLM fallback** ‚Äî –¥–ª—è –∫–∞–ª–∞–º–±—É—Ä–æ–≤ –∏ –æ–º–æ—Ñ–æ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è GPT
- üìä **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** ‚Äî EXACT, SLANT, ASSONANCE, CONSONANCE

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```env
DATABASE_URL="postgresql://rhymepadre:rhymepadre@localhost:5432/rhymepadre"
REDIS_HOST=localhost
REDIS_PORT=6379
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
OPENAI_API_KEY=–≤–∞—à_openai_–∫–ª—é—á  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

### 3. –ó–∞–ø—É—Å–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
npm run docker:up
```

### 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
npx prisma migrate dev --name init
```

### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
npm run start:dev
```

## Telegram-–±–æ—Ç

### –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ |
| `/search <—Ñ—Ä–∞–∑–∞>` | –ü–æ–∏—Å–∫ —Ä–∏—Ñ–º |
| `/compare –∞ \| –±` | –°—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–µ —Ñ—Ä–∞–∑—ã |
| `/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã |

### –ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–æ–≤

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `.txt` –∏–ª–∏ `.md` —Ñ–∞–π–ª —Å —Ç–µ–∫—Å—Ç–∞–º–∏ —Ç—Ä–µ–∫–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

```markdown
## –ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞
[–ö—É–ø–ª–µ—Ç 1]
–°—Ç—Ä–æ–∫–∞ —Ä–∞–∑
–°—Ç—Ä–æ–∫–∞ –¥–≤–∞

[–ü—Ä–∏–ø–µ–≤]
–°—Ç—Ä–æ–∫–∞ —Ç—Ä–∏
```

## REST API

### –ü–æ–∏—Å–∫ —Ä–∏—Ñ–º

```bash
# –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫
curl "http://localhost:3000/api/rhyme/search?phrase=–ø–æ–ª-–æ—Å–∫–∞–ª–∞"

# –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ —Å similarity
curl "http://localhost:3000/api/rhyme/search/detailed?phrase=–ø–æ–ª-–æ—Å–∫–∞–ª–∞"
```

### –ò–º–ø–æ—Ä—Ç —Ç–µ–∫—Å—Ç–∞

```bash
curl -X POST http://localhost:3000/api/parser/import \
  -H "Content-Type: application/json" \
  -d '{
    "text": "## –®–∞–ª–æ–º\n[–ö—É–ø–ª–µ—Ç]\n–Ø –≤–∞–º —É–¥–∞—Ä–æ–º —Å–Ω—ë—Å –ø–æ–ª-–æ—Å–∫–∞–ª–∞...",
    "sourceTitle": "miXXXtape I"
  }'
```

### –§–æ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

```bash
# –ê–Ω–∞–ª–∏–∑ –æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
curl "http://localhost:3000/api/phonetic/analyze?text=–ø–æ–ª-–æ—Å–∫–∞–ª–∞"

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö —Ç–µ–∫—Å—Ç–æ–≤
curl "http://localhost:3000/api/phonetic/compare?a=–ø–æ–ª-–æ—Å–∫–∞–ª–∞&b=–õ–∞%20–°–∫–∞–ª–∞"
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ main.ts                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ app.module.ts           # –ö–æ—Ä–Ω–µ–≤–æ–π –º–æ–¥—É–ª—å
‚îî‚îÄ‚îÄ modules/
    ‚îú‚îÄ‚îÄ prisma/             # –†–∞–±–æ—Ç–∞ —Å –ë–î
    ‚îú‚îÄ‚îÄ rhyme/              # –î–æ–º–µ–Ω —Ä–∏—Ñ–º (families, units, links)
    ‚îÇ   ‚îú‚îÄ‚îÄ dto/            # Data Transfer Objects
    ‚îÇ   ‚îú‚îÄ‚îÄ rhyme.service.ts
    ‚îÇ   ‚îî‚îÄ‚îÄ rhyme.controller.ts
    ‚îú‚îÄ‚îÄ phonetic/           # –§–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
    ‚îÇ   ‚îú‚îÄ‚îÄ constants/      # –ö–∞—Ä—Ç—ã –±—É–∫–≤ ‚Üí —Ñ–æ–Ω–µ–º—ã
    ‚îÇ   ‚îú‚îÄ‚îÄ utils/          # –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è, similarity
    ‚îÇ   ‚îî‚îÄ‚îÄ phonetic.service.ts
    ‚îú‚îÄ‚îÄ parser/             # –ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–∫—Å—Ç–æ–≤
    ‚îÇ   ‚îú‚îÄ‚îÄ utils/          # text-parser, rhyme-extractor
    ‚îÇ   ‚îî‚îÄ‚îÄ parser.service.ts
    ‚îî‚îÄ‚îÄ telegram/           # Telegram-–±–æ—Ç
```

## –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

- **RhymeFamily** ‚Äî —Å–µ–º–µ–π—Å—Ç–≤–æ —Ñ–æ–Ω–µ—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Ö–æ–∂–∏—Ö —Ä–∏—Ñ–º
- **RhymeExample** ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–∑ —Ç—Ä–µ–∫–∞
- **RhymeUnit** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω—ã–π —Ä–∏—Ñ–º—É—é—â–∏–π—Å—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç
- **RhymeLink** ‚Äî —Å–≤—è–∑—å –º–µ–∂–¥—É —Ä–∏—Ñ–º—É—é—â–∏–º–∏—Å—è —é–Ω–∏—Ç–∞–º–∏
- **PhoneticCache** ‚Äî –∫—ç—à —Ñ–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏

## –ê–ª–≥–æ—Ä–∏—Ç–º –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–∏—Ñ–º

1. –†–∞–∑–±–∏—Ç—å —Ç–µ–∫—Å—Ç –Ω–∞ —Å–µ–∫—Ü–∏–∏ –∏ —Å—Ç—Ä–æ–∫–∏
2. –ò–∑–≤–ª–µ—á—å "—Ö–≤–æ—Å—Ç" –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 1-3 —Å–ª–æ–≤–∞)
3. –§–æ–Ω–µ—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ö–≤–æ—Å—Ç—ã
4. Sliding window (size=4) ‚Äî –Ω–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏–µ
5. Union-Find ‚Äî —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–µ–º–µ–π—Å—Ç–≤–∞

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **NestJS** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Prisma** ‚Äî ORM
- **PostgreSQL** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Redis + BullMQ** ‚Äî –æ—á–µ—Ä–µ–¥–∏
- **Telegraf** ‚Äî Telegram-–±–æ—Ç
- **OpenAI** ‚Äî LLM –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

## –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `npm run start:dev` | –ó–∞–ø—É—Å–∫ –≤ dev-—Ä–µ–∂–∏–º–µ |
| `npm run build` | –°–±–æ—Ä–∫–∞ |
| `npm run prisma:studio` | GUI –¥–ª—è –ë–î |
| `npm run docker:up` | –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL –∏ Redis |
| `npm run docker:down` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã |
